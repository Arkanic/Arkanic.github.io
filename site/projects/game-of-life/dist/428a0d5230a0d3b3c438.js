(self.webpackChunkwasm_game_of_life=self.webpackChunkwasm_game_of_life||[]).push([[497],{497:(e,t,n)=>{"use strict";n.a(e,(async e=>{n.r(t);var r=n(997),i=n(826),a=e([r]);r=(a.then?await a:a)[0];var o={size:10},u={grid:"#CCCCCC",dead:"#FFFFFF",alive:"#000000"},l=document.getElementById("game-canvas"),c=document.getElementById("play-pause"),f=document.getElementById("clear-cells");l.width=window.innerWidth-200,l.height=window.innerHeight;var s=r.Pd.new(Math.floor(l.width/o.size),Math.floor(l.height/o.size)),h=s.width(),d=s.height(),v=l.getContext("2d"),_=new i.Z("fps"),g=null;function w(){_.render(),y(),p();for(var e=0;e<9;e++)s.tick();g=requestAnimationFrame(w)}function m(){c.textContent="Pause",w()}function y(){v.beginPath(),v.strokStyle=u.grid;for(var e=0;e<h;e++)v.moveTo(e*(o.size+1)+1,0),v.lineTo(e*(o.size+1)+1,(o.size+1)*d+1);for(var t=0;t<d;t++)v.moveTo(0,t*(o.size+1)+1),v.lineTo((o.size+1)*h+1,t*(o.size+1)+1);v.stroke()}function b(e,t){return e*h+t}function p(){var e=s.cells();v.beginPath();for(var t=0;t<d;t++)for(var n=0;n<h;n++){var i=b(t,n),a=!1;e[i]===r.bL.Alive?(v.fillStyle=u.alive,a=!0):e[i]===r.bL.Dead&&(v.fillStyle=u.dead,a=!0);var l=o.size;a&&v.fillRect(n*(l+1)+1,t*(l+1)+1,l,l)}v.stroke()}c.addEventListener("click",(function(e){null===g?m():(c.textContent="Play",cancelAnimationFrame(g),g=null)})),l.addEventListener("click",(function(e){var t=l.getBoundingClientRect(),n=l.width/t.width,r=l.height/t.height,i=(e.clientX-t.left)*n,a=(e.clientY-t.top)*r,u=o.size,c=Math.min(Math.floor(a/(u+1)),d-1),f=Math.min(Math.floor(i/(u+1)),h-1);s.toggle_cell(c,f),y(),p()})),f.addEventListener("click",(function(e){s.clear_cells()})),m()}))},826:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{Z:()=>i});var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fps=document.getElementById(t),this.frames=[],this.then=performance.now()}var t,n,i;return t=e,(n=[{key:"render",value:function(){var e=1/(performance.now()-this.then)*1e3;this.frames.push(e),this.frames.length>100&&this.frames.shift();var t=1/0,n=-1/0,r=0;for(var i in this.frames)r+=this.frames[i],t=Math.min(this.frames[i],t),n=Math.max(this.frames[i],n);var a=r/this.frames.length;this.fps.textContent="\nFPS:\n         latest = ".concat(Math.round(e),"\navg of last 100 = ").concat(Math.round(a),"\nmin of last 100 = ").concat(Math.round(t),"\nmax of last 100 = ").concat(Math.round(n)).trim()}}])&&r(t.prototype,n),i&&r(t,i),e}()},997:(e,t,n)=>{"use strict";n.a(e,(async r=>{n.d(t,{bL:()=>p,Pd:()=>k,ug:()=>z,zP:()=>C,iQ:()=>E,h9:()=>M,Dz:()=>x,kF:()=>T,Or:()=>F,oH:()=>P});var i=n(108);e=n.hmd(e);var a=r([i]);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i=(a.then?await a:a)[0];var u=new Array(32).fill(void 0);function l(e){return u[e]}u.push(void 0,null,!0,!1);var c=u.length;function f(e){var t=l(e);return function(e){e<36||(u[e]=c,c=e)}(e),t}var s=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});s.decode();var h=null;function d(){return null!==h&&h.buffer===i.memory.buffer||(h=new Uint8Array(i.memory.buffer)),h}function v(e,t){return s.decode(d().subarray(e,e+t))}function _(e){c===u.length&&u.push(u.length+1);var t=c;return c=u[t],u[t]=e,t}var g=0,w=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8"),m="function"==typeof w.encodeInto?function(e,t){return w.encodeInto(e,t)}:function(e,t){var n=w.encode(e);return t.set(n),{read:e.length,written:n.length}};var y=null;function b(){return null!==y&&y.buffer===i.memory.buffer||(y=new Int32Array(i.memory.buffer)),y}var p=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"}),k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(t,n){var r=i.universe_new(t,n);return e.__wrap(r)}}],(n=[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();i.__wbg_universe_free(e)}},{key:"tick",value:function(){i.universe_tick(this.ptr)}},{key:"width",value:function(){return i.universe_width(this.ptr)>>>0}},{key:"set_width",value:function(e){i.universe_set_width(this.ptr,e)}},{key:"height",value:function(){return i.universe_height(this.ptr)>>>0}},{key:"set_height",value:function(e){i.universe_set_height(this.ptr,e)}},{key:"cells",value:function(){return f(i.universe_cells(this.ptr))}},{key:"toggle_cell",value:function(e,t){i.universe_toggle_cell(this.ptr,e,t)}},{key:"clear_cells",value:function(){i.universe_clear_cells(this.ptr)}}])&&o(t.prototype,n),r&&o(t,r),e}();function z(e){f(e)}function C(e){return _(l(e).buffer)}function E(e,t,n){return _(new Uint8Array(l(e),t>>>0,n>>>0))}function M(){return _(new Error)}function x(e,t){var n=function(e,t,n){if(void 0===n){var r=w.encode(e),i=t(r.length);return d().subarray(i,i+r.length).set(r),g=r.length,i}for(var a=e.length,o=t(a),u=d(),l=0;l<a;l++){var c=e.charCodeAt(l);if(c>127)break;u[o+l]=c}if(l!==a){0!==l&&(e=e.slice(l)),o=n(o,a,a=l+3*e.length);var f=d().subarray(o+l,o+a);l+=m(e,f).written}return g=l,o}(l(t).stack,i.__wbindgen_malloc,i.__wbindgen_realloc),r=g;b()[e/4+1]=r,b()[e/4+0]=n}function T(e,t){try{console.error(v(e,t))}finally{i.__wbindgen_free(e,t)}}function F(e,t){throw new Error(v(e,t))}function P(){return _(i.memory)}}))},108:(e,t,n)=>{"use strict";var r=([r])=>n.v(t,e.id,"92428a57fea844ed9ce3",{"./wasm_game_of_life_bg.js":{__wbindgen_object_drop_ref:r.ug,__wbg_buffer_9e184d6f785de5ed:r.zP,__wbg_newwithbyteoffsetandlength_e57ad1f2ce812c03:r.iQ,__wbg_new_59cb74e423758ede:r.h9,__wbg_stack_558ba5917b466edd:r.Dz,__wbg_error_4bb6c2a97407129a:r.kF,__wbindgen_throw:r.Or,__wbindgen_memory:r.oH}});n.a(e,(e=>{var t=e([n(997)]);return t.then?t.then(r):r(t)}),1)}}]);